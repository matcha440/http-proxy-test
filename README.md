Something I found while trying to mock out http requests using [nock](https://www.npmjs.com/package/nock) in conjunction with [http-proxy](https://www.npmjs.com/package/http-proxy) was that it appeared like the ability to rewrite headers on a request before sending the request downstream was broken.  The reality is that `http-proxy` is not broken, but that the way `nock` overwrites the underlying Nodejs HTTP API some weird an unexpected behaviors arise.

To demonstrate this, I created two tests in this repo, both are testing a piece of middleware that removes one header and adds another.  The only difference between these two tests is that one spins up a second `Express` app instance to handle the downstream service whereas the other uses `nock` to achieve the same goals.  While `nock` is fairly convenient in declaratively setting up a mock http server, clearly it does not work well for this set of circumstances.
